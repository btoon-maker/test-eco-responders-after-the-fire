<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Eco-Responders: After the Fire</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Comfortaa font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --forest: #2f5d50;
      --bg: #f5f7f6;
      --card: #ffffff;
      --muted: #4a5b57;

      /* Save/Resume widget color (different from green) */
      --widget: #4b3f72;          /* purple */
      --widget2: #ffffff;
      --widgetBorder: rgba(255,255,255,0.18);
      --widgetBtn: #ffd166;       /* warm accent */
      --widgetBtnText: #2b2b2b;

      --soft: #eef5f2;
      --line: #e6ece9;
    }

    body{
      margin:0;
      font-family: "Comfortaa", system-ui, Arial, sans-serif;
      background: var(--bg);
      line-height: 1.65;
      color: #1f2b28;
    }

    header{
      background: var(--forest);
      color: #fff;
      padding: 1.25rem 1.25rem 1.5rem;
    }
    header h1{
      margin: 0 0 0.25rem;
      font-size: 1.35rem;
      font-weight: 700;
    }
    header .sub{
      opacity: 0.95;
      font-size: 0.95rem;
    }

    main{
      max-width: 980px;
      margin: 0 auto;
      padding: 1.25rem;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 1rem;
      box-shadow: 0 1px 0 rgba(0,0,0,0.03);
      margin-bottom: 1rem;
    }

    .grid2{
      display: grid;
      grid-template-columns: 1.35fr 0.65fr;
      gap: 1rem;
      align-items: start;
    }
    @media (max-width: 860px){
      .grid2{ grid-template-columns: 1fr; }
    }

    .imgHold{
      border: 2px dashed #c7d3cf;
      border-radius: 14px;
      background: #fafcfc;
      min-height: 220px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 0.75rem;
      color: var(--muted);
      text-align:center;
      font-size: 0.95rem;
    }

    .btnRow{
      display:flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      margin-top: 0.75rem;
    }

    button{
      font-family: inherit;
      border: none;
      border-radius: 12px;
      padding: 0.7rem 1rem;
      cursor:pointer;
      font-size: 1rem;
    }

    .btn{
      background: var(--forest);
      color:#fff;
    }
    .btn:hover{ opacity: 0.95; }

    .btnGhost{
      background: transparent;
      color: var(--forest);
      border: 1px solid var(--forest);
    }

    .btnSecondary{
      background: #405a53;
      color:#fff;
    }

    .small{
      font-size: 0.92rem;
      color: var(--muted);
    }

    details{
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 0.75rem 0.85rem;
      background: #fff;
      margin-top: 0.75rem;
    }
    details summary{
      cursor: pointer;
      font-weight: 700;
      color: #1f3b34;
    }
    details > *:not(summary){
      margin-top: 0.65rem;
    }

    hr{
      border: none;
      border-top: 1px solid var(--line);
      margin: 1rem 0;
    }

    textarea{
      width: 100%;
      min-height: 125px;
      border-radius: 14px;
      border: 1px solid #cfd8d5;
      padding: 0.85rem;
      font-size: 1rem;
      box-sizing: border-box;
      font-family: inherit;
    }

    .callout{
      background: var(--soft);
      border-left: 6px solid var(--forest);
      border-radius: 14px;
      padding: 0.85rem 1rem;
      margin-top: 0.75rem;
    }

    .hidden{ display:none; }

    /* ---------- TOP RIGHT Save/Resume widget (smaller + different color) ---------- */
    .widget{
      position: fixed;
      top: 12px;
      right: 12px;
      width: 240px;               /* smaller */
      background: var(--widget);  /* different color */
      color: var(--widget2);
      border: 1px solid var(--widgetBorder);
      border-radius: 14px;
      padding: 0.65rem;
      z-index: 9999;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    .widget h3{
      margin: 0 0 0.4rem;
      font-size: 0.95rem;
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    .widget button{
      width: 100%;
      padding: 0.55rem 0.7rem;
      border-radius: 12px;
      font-size: 0.95rem;
    }
    .widget .saveBtn{
      background: var(--widgetBtn);
      color: var(--widgetBtnText);
      font-weight: 700;
    }
    .widget .miniLabel{
      font-size: 0.82rem;
      opacity: 0.95;
      margin: 0.55rem 0 0.35rem;
    }
    .widget textarea{
      min-height: 58px;
      padding: 0.55rem;
      border-radius: 12px;
      font-size: 0.92rem;
      border: none;
      outline: none;
    }
    .widget .miniRow{
      display:flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    .widget .miniRow button{
      width: 50%;
      background: rgba(255,255,255,0.18);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.25);
      font-weight: 600;
    }
    .widget .msg{
      font-size: 0.82rem;
      opacity: 0.95;
      margin-top: 0.5rem;
      white-space: pre-wrap;
    }

    /* QR area (shown after Save & Exit) */
    .qrWrap{
      margin-top: 0.6rem;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 12px;
      padding: 0.5rem;
    }
    .qrTitle{
      font-size: 0.82rem;
      margin: 0 0 0.35rem;
      opacity: 0.95;
      font-weight: 700;
    }
    #qr{
      display:flex;
      justify-content:center;
    }

    /* Ensure content doesn't hide under widget on tiny screens */
    @media (max-width: 560px){
      .widget{ width: 92vw; right: 4vw; }
    }
  </style>
</head>

<body>
  <!-- Small top-right widget -->
  <div class="widget" aria-label="Save and Resume">
    <h3>Save & Exit</h3>
    <button class="saveBtn" id="saveExitBtn">Save & Exit</button>

    <div class="miniLabel">Resume Code (paste here)</div>
    <textarea id="resumeInput" placeholder="Paste code..."></textarea>

    <div class="miniRow">
      <button id="resumeBtn" title="Resume from code">Resume</button>
      <button id="clearResumeInputBtn" title="Clear input">Clear</button>
    </div>

    <div class="msg" id="widgetMsg"></div>

    <div class="qrWrap hidden" id="qrWrap">
      <div class="qrTitle">QR (opens lesson + restores progress)</div>
      <div id="qr"></div>
    </div>
  </div>

  <header>
    <h1>Eco-Responders: After the Fire</h1>
    <div class="sub">Interactive prototype ‚Ä¢ saves on device + Resume Code ‚Ä¢ no logins</div>
  </header>

  <main>
    <!-- SECTION A: Setting the story -->
    <div class="card" id="sceneA">
      <div class="grid2">
        <div>
          <p>The air smells faintly of pine and smoke, reminders that nature is constantly changing.</p>
          <p>As an Eco-Responder, you‚Äôve learned that every fire tells two stories: one of loss and one of renewal.</p>
          <p>This week, your team is on alert. Just over the ridge, a town called Forest Glen was hit by a wildfire two weeks ago.</p>
          <p>Your town, Maple Valley, sits just downwind.</p>

          <details>
            <summary>What to Expect</summary>
            <p>As an Eco-Responder, your job is to find out how wildfires start, spread, and change habitats.</p>
            <p>You‚Äôll look at real evidence, from NOAA weather data to FEMA field reports, to spot patterns and causes.</p>
            <p><strong>üîç Your Mission</strong></p>
            <ul>
              <li>Add notes in your Field Journal as you move through each part of the story.</li>
              <li>Use your clues and ideas to make a final plan that helps Maple Valley rebuild safely for both people and wildlife.</li>
              <li>You‚Äôll also make choices that guide what you see and discover along the way.</li>
            </ul>
            <p>You will encounter two kinds of challenges:</p>
            <p><strong>üî¨ Think Like a Scientist</strong><br><span class="small">Found inside your Field Journal. These help you connect your evidence to clear explanations, just like real scientists do.</span></p>
            <p><strong>Mission Challenges</strong><br><span class="small">Found in the lesson. These are optional deeper dives for students who want to explore more.</span></p>
          </details>

          <details>
            <summary>Mission Glossary: Key Terms to Know</summary>
            <p>‚ö° <strong>Fuel-Moisture</strong><br>How much water is stored in plants and soil. When it‚Äôs low, leaves and branches dry out and burn more easily.</p>
            <p>üî• <strong>Red Flag Warning</strong><br>A weather alert from NOAA when hot, dry, and windy conditions make wildfires more likely to spread.</p>
            <p>üè† <strong>Defensible Space</strong><br>A safety zone (about 30 feet around a home) kept clear of flammable materials to slow or stop wildfire spread.</p>
            <p>üèó <strong>Fire-Resistant Materials</strong><br>Building materials (like stucco or metal roofs) that don‚Äôt easily burn, protecting homes from embers and heat.</p>
            <p>‚ôª <strong>Feedback Loop</strong><br>When one change causes another that strengthens or weakens the first, for example, fewer trees ‚Üí hotter ground ‚Üí more fires.</p>
            <p>üåé <strong>Ecosystem Recovery</strong><br>How plants, animals, and soil rebuild after a disturbance like a wildfire.</p>
            <p>üèõ <strong>FEMA (Federal Emergency Management Agency)</strong><br>The agency that helps people and communities prepare for and recover from natural disasters.</p>
            <p>‚òÅ <strong>NOAA (National Oceanic and Atmospheric Administration)</strong><br>The agency that studies Earth‚Äôs weather and climate to help predict and prevent environmental hazards.</p>
          </details>

          <div class="btnRow">
            <button class="btn" id="beginMissionBtn">Begin Mission</button>
          </div>
        </div>

        <div class="imgHold">
          Image Holder<br>
          <span class="small">(Place an image here later)</span>
        </div>
      </div>
    </div>

    <!-- SECTION B: Appears after Begin Mission -->
    <div class="card hidden" id="sceneB">
      <div class="grid2">
        <div class="imgHold">
          Image Holder<br>
          <span class="small">(Mission alert / Jordan on screen)</span>
        </div>

        <div>
          <h2 style="margin-bottom:0.25rem;">Ping! Ping! Ping!</h2>
          <p>Your Eco-Responder tablet flashes red.</p>
          <p>Jordan, your FEMA mentor, appears on the screen.</p>
          <p>‚ÄúForest Glen‚Äôs fire is finally contained,‚Äù he says, ‚Äúbut NOAA just issued a Red Flag Warning for Maple Valley. Relative humidity is 14%, winds steady at 25 mph, strong enough to push embers a mile. We need evidence from Forest Glen before the next spark.‚Äù</p>
          <p><em>"Don't forget to bring your field journal!"</em></p>

          <hr>

          <p><strong>Where will you begin?</strong></p>

          <div class="btnRow">
            <button class="btn" data-choice="startpath" data-value="noaa">Analyze NOAA Weather Data First</button>
            <button class="btn" data-choice="startpath" data-value="field">Go Straight to the Fire Zone for Field Observation</button>
          </div>

          <div class="callout hidden" id="choiceFeedback"></div>

          <div class="btnRow">
            <button class="btnSecondary hidden" id="continueBtn">Continue</button>
          </div>
        </div>
      </div>
    </div>

    <!-- SECTION C1: NOAA branch -->
    <div class="card hidden" id="branchNoaa">
      <h2>You chose: NOAA Weather Data</h2>
      <p>You arrive at the mobile lab, and your tablet connects to NOAA‚Äôs drought archive.</p>
      <p>‚ÄúSee the trend? Less rain and more heat mean lower fuel moisture,‚Äù Jordan mutters. ‚ÄúThat‚Äôs a dangerous mix. The plants themselves become fuel.‚Äù</p>
      <p>With your data uploaded, you now need to understand the field conditions.</p>

      <div class="imgHold" style="min-height:180px; margin-top:0.75rem;">
        Image Holder (below text)
      </div>

      <hr>

      <h3>Field Journal</h3>
      <p class="small">Record one pattern that increased fire risk and explain its effect on plants and animals.</p>
      <div class="callout">
        üí° <strong>Scientist Tip:</strong> You might want to mention how this pattern affects living things, not just the environment.
      </div>
      <textarea data-save="noaa_journal" placeholder="Type here..."></textarea>

      <h3 style="margin-top:1rem;">‚ö° Mission Challenge (Optional)</h3>
      <p class="small">Predict what might happen to the forest next year if rainfall continues to drop and temperatures stay high. Use data to support your prediction.</p>
      <textarea data-save="noaa_challenge" placeholder="Type here (optional)..."></textarea>
    </div>

    <!-- SECTION C2: Field branch -->
    <div class="card hidden" id="branchField">
      <div class="grid2">
        <div class="imgHold">
          Image Holder<br>
          <span class="small">(Ranger photos)</span>
        </div>

        <div>
          <h2>You chose: Field Observation</h2>
          <p>You ride beside Ranger Marisol into Forest Glen. The air smells like ash and rain. Your tablet displays photos from Ranger Marisol.</p>

          <p><strong>In the photos, you notice:</strong></p>
          <ul>
            <li>Soil dry and crumbly, the organic layer burned away.</li>
            <li>Green sprouts poking through black earth.</li>
            <li>Metal-roofed homes still standing; wood roofs gone.</li>
          </ul>

          <p>‚ÄúSoil‚Äôs dry,‚Äù she says. ‚ÄúThin ash layer, but look, some pine cones cracked open.‚Äù</p>
          <p>You examine one: resin melted, seeds spilled onto the ground.</p>
          <p>‚ÄúSerotinous cones,‚Äù she explains. ‚ÄúSome trees need heat to start over.‚Äù</p>
          <p>Nearby, houses with metal roofs stand untouched; those with wood shingles are gone.</p>
        </div>
      </div>

      <hr>

      <h3>Field Journal</h3>
      <p class="small">Record two observations showing how the fire affected people or wildlife.</p>
      <div class="callout">
        üí° <strong>Scientist Tip:</strong> You might want to mention how this pattern affects living things, not just the environment.
      </div>
      <textarea data-save="field_journal" placeholder="Type here..."></textarea>

      <h3 style="margin-top:1rem;">üå± Mission Challenge (Optional)</h3>
      <p class="small">Research a local fire-adapted plant. How does it help stabilize soil or promote regrowth?</p>
      <textarea data-save="field_challenge" placeholder="Type here (optional)..."></textarea>
    </div>

    <div class="card">
      <p class="small">
        Prototype note: Writing auto-saves on this device. ‚ÄúSave & Exit‚Äù generates a Resume Code + QR to restore progress on another device.
      </p>
    </div>

    <!-- QR code library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="app.js"></script>
  </main>
</body>
</html>
