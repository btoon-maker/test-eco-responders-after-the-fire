<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eco-Responders Lesson</title>

  <style>
    :root{
      --page:#1f3b2c;
      --page2:#1a3226;
      --paper:#ffffff;
      --paper2:#f8fafc;
      --ink:#0f172a;
      --muted:#475569;
      --border:rgba(15,23,42,0.14);
      --shadow: 0 12px 30px rgba(15, 23, 42, 0.18);
      --radius: 14px;
      --accent:#0ea5a4;
      --accent2:#b45309;
      --danger:#dc2626;
      --warn:#f59e0b;
      --font-body: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    html,body{height:100%;}
    body{
      margin:0;
      font-family: var(--font-body);
      color: var(--ink);
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(255,255,255,0.06), transparent 55%),
        radial-gradient(900px 700px at 80% 35%, rgba(255,255,255,0.05), transparent 60%),
        linear-gradient(180deg, var(--page), var(--page2));
      background-attachment: fixed;
    }

    header{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border);
      padding: 16px 18px;
    }

    .header-inner{
      max-width: 980px;
      margin: 0 auto;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      padding-right: 260px;
      box-sizing: border-box;
    }

    .title{
      font-size: 20px;
      font-weight: 900;
      margin:0;
      color: var(--ink);
    }
    .subtitle{
      margin: 4px 0 0 0;
      color: var(--muted);
      font-size: 13px;
    }

    main{
      max-width: 980px;
      margin: 18px auto 150px auto;
      padding: 0 18px;
      box-sizing: border-box;
    }

    .app-error{
      display:none;
      margin: 14px 0;
      border: 1px solid rgba(220,38,38,0.35);
      background: rgba(220,38,38,0.10);
      border-radius: 14px;
      padding: 12px 14px;
      line-height: 1.45;
      white-space: pre-wrap;
      box-shadow: 0 10px 24px rgba(15,23,42,0.14);
    }
    .app-error.show{ display:block; }
    .app-error strong{ color: rgba(220,38,38,0.95); }

    .resume-widget{
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1000;
      width: 260px;
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(8px);
      border: 1px solid var(--border);
      border-radius: 14px;
      box-shadow: var(--shadow);
      overflow:hidden;
      font-size: 12px;
    }
    .resume-widget .rw-body{ padding: 10px; }
    .rw-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .rw-row input{
      flex: 1 1 auto;
      min-width: 120px;
      border-radius: 10px;
      border: 1px solid rgba(15,23,42,0.18);
      background: #fff;
      color: var(--ink);
      padding: 8px 8px;
      font-weight: 900;
      font-size: 12px;
      outline:none;
    }
    .rw-note{
      margin-top: 8px;
      color: var(--muted);
      line-height: 1.35;
    }

    button.btn{
      appearance:none;
      border: 1px solid rgba(15,23,42,0.18);
      background: #fff;
      color: var(--ink);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 900;
      font-size: 14px;
      transition: transform 0.05s ease, background 0.2s ease, border-color 0.2s ease;
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.06);
    }
    button.btn.primary{
      background: rgba(14,165,164,0.12);
      border-color: rgba(14,165,164,0.45);
    }
    button.btn.warning{
      background: rgba(245,158,11,0.14);
      border-color: rgba(245,158,11,0.45);
    }

    .export-bar{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 900;
      padding: 10px 12px;
      background: rgba(31,59,44,0.85);
      backdrop-filter: blur(8px);
      border-top: 1px solid rgba(255,255,255,0.14);
      display:flex;
      justify-content:center;
    }
    .export-inner{
      width: min(980px, 100%);
      display:flex;
      justify-content:flex-end;
      gap:10px;
      padding: 0 6px;
      box-sizing:border-box;
    }

    @media (max-width: 980px){
      .header-inner{ padding-right: 0; }
      .resume-widget{ position: static; width: auto; margin: 10px 18px 0 18px; }
    }
  </style>
</head>

<body>
  <header>
    <div class="header-inner">
      <div>
        <h1 class="title">Eco-Responders</h1>
        <p class="subtitle">Single-page interactive lesson (sections reveal only when you click).</p>
      </div>
    </div>
  </header>

  <aside class="resume-widget" aria-label="Pause & Resume Later widget">
    <div class="rw-body">
      <div class="rw-row">
        <button class="btn primary" id="pauseBtn" type="button">Pause &amp; Resume Later</button>
      </div>
      <div style="height:10px"></div>
      <div class="rw-row">
        <input id="pasteCode" type="text" placeholder="Paste Resume Code Here" />
        <button class="btn warning" id="resumeBtn" type="button">Resume</button>
      </div>
      <div class="rw-note" id="rwNote">
        Your progress saves automatically on this device. To continue on another device, use “Pause &amp; Resume Later” to copy the Resume Code.
      </div>
    </div>
  </aside>

  <main>
    <div id="appError" class="app-error" role="alert"></div>
    <div id="lesson"></div>
  </main>

  <div class="export-bar">
    <div class="export-inner">
      <button class="btn primary" id="exportBtn" type="button">Export My Journal (PDF)</button>
    </div>
  </div>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- App -->
  <script src="app.js"></script>

  <!-- If app.js fails to load, show a BIG message -->
  <script>
    (function(){
      const err = document.getElementById("appError");
      setTimeout(() => {
        const lesson = document.getElementById("lesson");
        // If lesson is still empty after a moment, app.js likely didn't run.
        if(lesson && !lesson.children.length){
          err.classList.add("show");
          err.innerHTML =
            "<strong>Your lesson didn’t load.</strong>\n\n" +
            "This almost always means GitHub Pages couldn’t find or run app.js.\n\n" +
            "Check your repo:\n" +
            "• Is the file named exactly: app.js (lowercase)?\n" +
            "• Is it in the same folder as index.html?\n" +
            "• If your file is App.js, rename it to app.js.\n";
        }
      }, 800);
    })();
  </script>
</body>
</html>
